---
entryScene: red
sceneSize: { width: 2560, height: 1440 }

sprites:
  title_bg: "images/title_bg.jpg"

  immigration_bg: "images/immigration_bg.jpg"
  outside_immigration_bg: "images/outsideimmigration_bg.jpg"
  red_bg: "images/red_bg.jpg"

  immigration_door_left: "images/immigration_door_left.jpg"
  immigration_door_right: "images/immigration_door_right.jpg"

  outside_immigration_waving:
    type: spritesheet
    file: "images/outsideimmigration_waving_arms.png"
    frameCounts: { x: 2, y: 1 }
    defaultFrame: { x: 0, y: 0 }
    animations:
      wave:
        startFrame: { x: 0, y: 0 }
        count: 2
        fps: 2
        options:
          loop: true

  red_hair_flash: "images/red_hair_flash.png"

  forward_button: "images/forward_button.png"

scenes:
  # title =================================================
  title:
    background: title_bg
    actors:
      - sprite: forward_button
        position: { x: 2000, y: 1000 }

        triggers:
          onClick:
            action: changeScene
            data: { destination: immigration }

  # immigration ===========================================
  immigration:
    background: immigration_bg
    actors:
      # Left Door
      - sprite: immigration_door_left
        position: { x: 660, y: 230 }

        triggers:
          onClick:
            action: broadcastTrigger
            data: { name: openDoors }

          openDoors:
            - action: startAnimation
              maxActivations: 1
              data: { name: open }
            - action: changeScene
              delay: 2500
              maxActivations: 1
              data: { destination: outside_immigration }

        animations:
          open:
            frames:
              - moveRelative: { x: -600, y: 0 }
                time: 1000

      # Right Door
      - sprite: immigration_door_right
        position: { x: 1360, y: 230 }

        triggers:
          onClick:
            action: broadcastTrigger
            data: { name: openDoors }

          openDoors:
            - action: startAnimation
              maxActivations: 1
              data: { name: open }

        animations:
          open:
            frames:
              - moveRelative: { x: 600, y: 0 }
                time: 1000

  # outside_immigration ===================================
  outside_immigration:
    background: outside_immigration_bg
    actors:
      - sprite: outside_immigration_waving
        position: { x: 1337, y: 119 }
        triggers:
          onLoad:
            action: startSpriteAnimation
            data: { name: wave }

      - sprite: forward_button
        position: { x: 2000, y: 1000 }

        triggers:
          onClick:
            action: changeScene
            data: { destination: red }


  # red ===================================================
  red:
    background: red_bg
    actors:
      - sprite: red_hair_flash
        position: { x: 600, y: 310 }
        triggers:
          onLoad:
            action: startAnimation
            data: { name: flash }
        animations:
          flash:
            frames:
              - setHidden: true
                time: 400
              - setHidden: false
                time: 400
            options: { loop: true }